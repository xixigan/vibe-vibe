---
title: "8.2 安全问题诊断手册"
description: "遇到报错怎么排查？症状→原因→解决方案"
---

# 8.2 安全问题诊断手册

> **待开发**

---

出问题了？按症状查这本手册。

**.env 配置了但读不到**
- 症状：`process.env.XXX` 返回 `undefined`
- 原因1：没重启服务（环境变量只在启动时加载）
- 解决：Ctrl+C 停止，重新 `pnpm dev`
- 原因2：变量名拼写错误
- 解决：检查 `.env` 和代码中的变量名是否一致

**Server 能读到但 Client 读不到**
- 症状：API 路由里能读到，React 组件里读不到
- 原因：没加 `NEXT_PUBLIC_` 前缀
- 解决：前端需要的变量改为 `NEXT_PUBLIC_XXX`

**跨域报错**
- 症状：浏览器控制台显示 `CORS policy` 错误
- 原因：浏览器安全机制阻止跨域请求
- 解决：让 AI 配置后端 CORS，允许特定域名访问

**.gitignore 配置了但文件仍被追踪**
- 症状：`.env` 已加入 `.gitignore`，但 `git status` 仍显示
- 原因：文件之前已被 Git 追踪过
- 解决：`git rm --cached .env` 移除缓存

**密钥已泄露**
- 症状：不小心把密钥提交到 GitHub
- 解决：1) 立即重置密钥 2) 让 AI 帮你清洗 Git 历史

---

::: tip 先重启服务

90% 的 .env 问题，重启终端服务就能解决。

:::
